<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="kf8-oEOzkveV_8ZnJN6P7InR5cl14Ik9R3Phxayihgk" />

    <title>My Journey with Forms in React</title>
    <meta name="description" content="Alex Martinez is a Washington, D.C. based web designer who plays with code and currently works at iStrategyLabs. Likes include French Bulldogs, good burritos, and good company.<br>This site is a work in progress and is being built with Jekyll and hosted on Github.">

    <link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/favicons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/favicons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/favicons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/favicons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/favicons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/favicons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/favicons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/favicons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/favicons/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="http://localhost:4000/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://localhost:4000/favicons/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="http://localhost:4000/favicons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="http://localhost:4000/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="http://localhost:4000/favicons/manifest.json">
    <link rel="mask-icon" href="http://localhost:4000/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://localhost:4000/thoughts/2018/04/16/form-management-in-react-and-redux.html">
    <link href="https://fontastic.s3.amazonaws.com/HaZ5yL6SCfhWxMgeXyixTS/icons.css" rel="stylesheet">
    <link href="https://file.myfontastic.com/HaZ5yL6SCfhWxMgeXyixTS/icons.css" rel="stylesheet">

    <script src="https://use.typekit.net/jsu0zei.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <script src="/js/docready.js" type="text/javascript"></script>


    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46815802-1', 'auto');
  ga('send', 'pageview');

</script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <!--<a class="site-title" href="/">Alex Martinez</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>-->

  </div>

</header>

    <nav class="nav--primary">
    <div class="nav-title text--mono">
        <a href="/" class="link--text">
            AlxMrtnz
        </a>
    </div>

    <ul class="nav-list">
        <li>
            <a href="/work" class="
                
                 link--text text--mono">
                Work
            </a>
        </li>
        <li>
            <a href="/about" class="
                
                 link--text text--mono">
                About
            </a>
        </li>
        <li>
            <a href="/thoughts" class="
                
                 link--text text--mono">
                Thoughts
            </a>
        </li>
    </ul>
</nav>

    <div class="page-content">
      <div class="post-content">
          <header class="post-header">
            <div class="featured-icon">
              <img src="http://localhost:4000/assets/posts/11-09-15/terminal-icon.png" alt="Icon of Golden Gate Bridge">
            </div> 
            <p class="post-date text--mono">April 16, 2018</p>
            <h1 class="post-title heading--large">My Journey with Forms in React</h1>
            

            
          </header>
          <p>This is the story of my introduction to forms with both React and Redux. Although I’ve worked on designing and building websites and apps for years, it’s been a shorter time that I’ve been working as a front-end developer.</p>

<p>Before becoming a full-time developer, I designed many web and mobile apps but had only contributed to small portions of codes on the front-end of web applications. When it came to learning and building with an actual front-end library/framework, the learning curve for me was actually pretty high. The beginning was not pretty, but after a few React projects, I’ve developed a better personal workflow for managing and working with forms in React.</p>

<h2 id="part-i-a-rough-beginning">Part I: A Rough Beginning</h2>

<p>I began my adventure with forms in React through <a href="https://reactjs.org/docs/forms.html#controlled-components" target="_blank" class="link--text-in-p">controlled components</a>, storing input values for elements like <code class="highlighter-rouge">&lt;input&gt;</code>, <code class="highlighter-rouge">&lt;textarea&gt;</code>, and <code class="highlighter-rouge">&lt;select&gt;</code> in a parent form component’s state. It made sense enough.</p>

<p>Create a state for the component that holds each input’s value and update that value whenever the user interacts with the input. Here’s an example of some early work for a Login Form comprised of two inputs, an email and a password:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>import React, { Component } from 'react'

class LoginForm extends Component {

  // "Alright, here's that state I've been talking about."
  state = {
    input: {
      email: '',
      password: ''
    }
  }

  // "Oh, and gotta update it whenever we change the input"
  handleInputChange(newPartialInput) {
    this.setState(state =&gt; ({
      ...state,
      input: {
        ...state.input,
        ...newPartialInput
      }
    }))
  }

  handleSubmit = (event) =&gt; {
    // "We'll get to you later"
  }

  // "And finally, just render the form!"
  render() {
    const { input } = this.state

    return (
      &lt;div&gt;
        &lt;form
          className="sessions-form"
          onSubmit={this.handleSubmit}
        &gt;
          &lt;div
            className='input-container'
          &gt;
            &lt;label&gt;
              Email Address
            &lt;/label&gt;
            &lt;input
              name="email"
              type="email"
              placeholder="you@youremail.com"
              value={input.email.value}
              onChange={event =&gt; this.handleInputChange(
                {email: event.target.value}
              )}
            /&gt;
          &lt;/div&gt;
          &lt;div
            className='input-container'
          &gt;
            &lt;label&gt;
              Password
            &lt;/label&gt;
            &lt;div className="password-input-container"&gt;
              &lt;input
                name="password"
                type="password"
                placeholder="password"
                value={input.password.value}
                onChange={event =&gt; this.handleInputChange(
                    {password: event.target.value}
                )}
              /&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;input className="cta" type="submit" value="Login" /&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    )
  }
}

export default LoginForm

</code></pre>
</div>

<p>“Awesome!”, I thought. “But… how do I validate the form once the user fills it out?”</p>

<p>I’ll spare you too much of the step-by-step detail, but let’s say my initial pass at front-end validation was… crude.</p>

<p>The code will follow, but as a basic jist, here’s what’s going on:</p>

<ol>
  <li>I expanded the form’s <code class="highlighter-rouge">state</code> to hold both the value of an input and a boolean <code class="highlighter-rouge">hasError</code> to indicate whether or not it had an error. This would be used to set a class of <code class="highlighter-rouge">error</code> on the input’s containing div (for styling purposes)</li>
  <li>I added a function to determine if the form was valid, <code class="highlighter-rouge">isFormValid()</code>, and set the <code class="highlighter-rouge">hasError</code> bool to true for any input that had an error</li>
  <li>I added a function <code class="highlighter-rouge">renderErrorMessage()</code> to render an error message for the form as a whole or a specific message individual fields if passed in a string of <code class="highlighter-rouge">email</code> or <code class="highlighter-rouge">password</code></li>
  <li>And lastly, an <code class="highlighter-rouge">accessError</code> bool to the component state to determine whether or not to show the combined form error message above the form</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>import React, { Component } from 'react';
import { Link } from 'react-router-dom';

// Utils
import { validateEmail } from '../../utils/helpers';
import * as API  from '../../utils/api';

class LoginForm extends Component {
  state = {
    input: {
      email: {
        value: "",
        hasError: false
      },
      password: {
        value: "",
        hasError: false
      }
    },
    accessError: false
  }

  handleInputChange(newPartialInput) {
    this.setState(state =&gt; ({
      ...state,
      input: {
        ...state.input,
        ...newPartialInput
      }
    }))
  }

  handleSubmit = (event) =&gt; {
    event.preventDefault();
    const userCanidate = {
      'email': this.state.input.email.value,
      'password': this.state.input.password.value
    }

    if (this.isFormValid()) {
      API.login(userCanidate).then(response =&gt; {
        if (response.success)) {
          // Do some stuff! The form worked :)
        } else {
          this.setState(state =&gt; ({
            ...state,
            accessError: true
          }))
        }
      });
    }
  }

  isFormValid = () =&gt; {
    let newInputState = {...this.state.input};
    let errorsArePresent = false;

    if (!validateEmail(newInputState.email.value)) {
      newInputState.email.hasError = true;
      errorsArePresent = true;
    }

    if (newInputState.password.value === '') {
      newInputState.password.hasError = true;
      errorsArePresent = true;
    }

    if (errorsArePresent) {
      this.setState(state =&gt; ({
        ...state,
        input: newInputState
      }))
    } else {
      return true;
    }
  }

  renderErrorMessage = (input) =&gt; {
    let message = '';

    if (input === 'email') {
      message = 'Please enter a valid email';
    } else if (input === 'password') {
      message = 'Please enter a password'
    } else {
      message = 'Invalid email or password';
    }
    return (
      &lt;div className="input-error-message"&gt;
        {message}
      &lt;/div&gt;
    )
  }

  render() {
    const { input, accessError } = this.state;

    return (
      &lt;div&gt;
        {accessError &amp;&amp;
          &lt;div className='input-container error'&gt;
            {this.renderErrorMessage()}
          &lt;/div&gt;
        }
        &lt;form className="sessions-form" onSubmit={(event) =&gt; this.handleSubmit(event)}&gt;
          &lt;div
            className={`input-container${input.email.hasError ? ' error' : ''}`}
          &gt;
            &lt;label&gt;Email Address&lt;/label&gt;
            &lt;input
              name="email"
              type="email"
              placeholder="you@youremail.com"
              value={input.email.value}
              onChange={event =&gt; this.handleInputChange(
                {email: {value: event.target.value, hasError: false}}
              )}
            /&gt;
            {input.email.hasError ? this.renderErrorMessage('email') : null}
          &lt;/div&gt;
          &lt;div
            className={`input-container${input.password.hasError ? ' error' : ''}`}
          &gt;
            &lt;label&gt;Password&lt;/label&gt;
            &lt;div className="password-input-container"&gt;
              &lt;input
                className={`${input.password.hasError ? 'error' : ''}`}
                name="password"
                type="password"
                placeholder="password"
                value={input.password.value}
                onChange={event =&gt; this.handleInputChange(
                    {password: {value: event.target.value, hasError: false}}
                )}
              /&gt;
              &lt;Link
                className="forgot-password-link"
                to="/reset-password"
              &gt;
                Forgot?
              &lt;/Link&gt;
            &lt;/div&gt;
            {input.password.hasError ? this.renderErrorMessage('password') : null}
          &lt;/div&gt;
          &lt;input className="cta" type="submit" value="Login" /&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    );
  }
}

export default LoginForm;
</code></pre>
</div>

<p>It wasn’t great, but it worked. Even before the project was over, I knew that the way I was building and managing forms was unsustainable. The code I was writing wasn’t DRY. Each form caused unnecessary duplication in validation and error message functions and there was a lack of abstraction for reapeated components like inputs with error messages.</p>

<h2 id="part-ii-it-got-a-little-better">Part II: It Got (a Little) Better</h2>
<h3 id="building-abstractions-for-repeated-elements">Building Abstractions for Repeated Elements</h3>

<p>Much like the <a href="https://medium.com/javascript-inside/some-thoughts-on-forms-in-react-9ca2d9078c20">view driven approach discussed by A. Sharif</a>, I began to break out repeated input elements into their own components. This allowed me to pass props such as an input’s label and error message into the component as well as onchange function</p>

<p>It made an input like this…</p>
<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div
  className={`input-container${input.email.hasError ? ' error' : ''}`}
&gt;
  &lt;label&gt;Email Address&lt;/label&gt;
  &lt;input
    name="email"
    type="email"
    placeholder="you@youremail.com"
    value={input.email.value}
    onChange={event =&gt; this.handleInputChange(
      {email: {value: event.target.value, hasError: false}}
    )}
  /&gt;
  {input.email.hasError ? this.renderErrorMessage('email') : null}
&lt;/div&gt;
</code></pre>
</div>

<p>into a more manageable component, like this…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;Input
  onChange={doSomething}
  label='Name Field'
  errorMessage={getSomeMessage()}
/&gt;
</code></pre>
</div>

<p>Building components for different types of inputs helped solve the repetitive nature of managing inputs’ labels and error messages, but still didn’t solve the issue of actually validating the form as a whole.</p>

<h2 id="part-iii-redux-forms">Part III: Redux Forms</h2>
<h3 id="learning-to-love-forms-again">Learning to Love Forms Again</h3>

<p>After my first project using React, I had gotten the hang of building out forms using abstracted components, but I knew there had to be an easier way.</p>

<p>My coworker, Jake, suggested I look into <a href="https://redux-form.com">redux-form</a>. He had been using it on some of his React projects and</p>

<p>https://changelog.com/reactpodcast/2 - Formik</p>

          
      </div>
      
      <div class="post-comments">
        
     <div id="disqus_thread"></div>
     <script>
     /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
     /*
     var disqus_config = function () {
     this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
     this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
     };
     */
     (function() { // DON'T EDIT BELOW THIS LINE
     var d = document, s = d.createElement('script');

     s.src = '//alxmrtnz.disqus.com/embed.js';

     s.setAttribute('data-timestamp', +new Date());
     (d.head || d.body).appendChild(s);
     })();
     </script>
     <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


      </div>
      <!-- <div class="post-nav">
        <div class="post-nav__direction post-nav__prev-post">
          
            <a class="prev" href="/work/locker-linked.html">&laquo; Locker Linked</a>
          
        </div>
        <div class="post-nav__direction post-nav__next-post">
          
        </div>
      </div> -->
          
    </div>

    <footer class="site-footer">
	<div class="footer__content">
			<ul class="social-list--footer">
		      <li>
  <a href="https://twitter.com/alx_mrtnz" target="_blank" class="icon-social-twitter"></a>
</li>
<li>
  <a href="https://dribbble.com/alxmrtnz" target="_blank" class="icon-dribbble"></a>
</li>
<li>
  <a href="https://github.com/alxmrtnz" target="_blank" class="icon-github"></a>
</li>
<li>
	<a href="mailto:alex@alxmrtnz.com?Subject=Hello%20there!" class="icon-letter-mail"></a>
</li>
		    </ul>
		    <div class="footer__about">
		    	<p class="footer__credits">
		    		© Alex Martinez 2017. Made with ♥ on Jekyll
		    	</p>
		    </div>
	</div>
</footer>

    

  </body>

</html>